# é¡¹ç›®å®Œæˆæ€»ç»“

## âœ… å·²å®ŒæˆåŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½
- [x] **åŒæ­¥è½¬æ¢æ¥å£** - WebM æµ â†’ MP4 æµç›´æ¥è¿”å›
- [x] **å¼‚æ­¥è½¬æ¢æ¥å£** - åˆ†ç‰‡ä¸Šä¼  + åå°å¤„ç†
- [x] **ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ** - çŠ¶æ€æŸ¥è¯¢ã€è¿›åº¦è·Ÿè¸ª
- [x] **è§†é¢‘ä¸‹è½½æ¥å£** - è½¬æ¢å®Œæˆåä¸‹è½½ MP4
- [x] **ç«¯å£æ™ºèƒ½é€‰æ‹©** - 18888-28888 èŒƒå›´è‡ªåŠ¨é¿å…å†²çª
- [x] **å¼€æœºè‡ªå¯åŠ¨** - macOS/Windows/Linux æ”¯æŒ

### æŠ€æœ¯å®ç°
- [x] Go 1.23 + Gin æ¡†æ¶
- [x] FFmpeg è§†é¢‘å¤„ç†
- [x] ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
- [x] CORS è·¨åŸŸæ”¯æŒ
- [x] å¥åº·æ£€æŸ¥æ¥å£

### æ‰“åŒ…éƒ¨ç½²
- [x] macOS DMG æ‰“åŒ…è„šæœ¬
- [x] Windows EXE æ‰“åŒ…è„šæœ¬
- [x] è‡ªå¯åŠ¨é…ç½®(launchd/æ³¨å†Œè¡¨/systemd)

### æ–‡æ¡£ç¤ºä¾‹
- [x] å®Œæ•´ README æ–‡æ¡£
- [x] API æ¥å£æ–‡æ¡£
- [x] å‰ç«¯ç¤ºä¾‹(HTML)
- [x] JavaScript å°è£…ç±»ç¤ºä¾‹

## ğŸ“ é¡¹ç›®ç»“æ„

```
ffmpeg-binary/
â”œâ”€â”€ main.go                      # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ go.mod                       # Go æ¨¡å—ä¾èµ–
â”œâ”€â”€ README.md                    # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ .gitignore                   # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ build-macos.sh              # macOS æ‰“åŒ…è„šæœ¬
â”œâ”€â”€ build-windows.bat           # Windows æ‰“åŒ…è„šæœ¬
â”œâ”€â”€ internal/                   # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ config/                 # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ config.go
â”‚   â”œâ”€â”€ server/                 # HTTP æœåŠ¡å™¨
â”‚   â”‚   â”œâ”€â”€ server.go          # æœåŠ¡å™¨ä¸»é€»è¾‘
â”‚   â”‚   â””â”€â”€ handlers.go        # API å¤„ç†å™¨
â”‚   â”œâ”€â”€ converter/              # è§†é¢‘è½¬æ¢
â”‚   â”‚   â””â”€â”€ converter.go
â”‚   â”œâ”€â”€ task/                   # ä»»åŠ¡ç®¡ç†
â”‚   â”‚   â””â”€â”€ task.go
â”‚   â”œâ”€â”€ autostart/              # è‡ªå¯åŠ¨
â”‚   â”‚   â””â”€â”€ autostart.go
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ port.go            # ç«¯å£é€‰æ‹©
â””â”€â”€ examples/                   # ç¤ºä¾‹æ–‡ä»¶
    â””â”€â”€ demo.html              # å‰ç«¯ç¤ºä¾‹

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### 1. å¼€å‘è¿è¡Œ
```bash
go run main.go
```

### 2. ç¼–è¯‘
```bash
go build -o ffmpeg-binary
```

### 3. æ‰“åŒ…
```bash
# macOS
./build-macos.sh

# Windows
build-windows.bat
```

### 4. å®‰è£…è‡ªå¯åŠ¨
```bash
./ffmpeg-binary install
```

## ğŸ“¡ API ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/v1/convert/sync` | åŒæ­¥è½¬æ¢ |
| POST | `/api/v1/convert/async` | åˆ›å»ºå¼‚æ­¥ä»»åŠ¡ |
| POST | `/api/v1/convert/async/:id/chunk` | ä¸Šä¼ åˆ†ç‰‡ |
| GET | `/api/v1/task/:id` | æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€ |
| GET | `/api/v1/task/:id/download` | ä¸‹è½½è§†é¢‘ |
| DELETE | `/api/v1/task/:id` | åˆ é™¤ä»»åŠ¡ |
| GET | `/api/v1/tasks` | åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡ |
| GET | `/health` | å¥åº·æ£€æŸ¥ |

## ğŸ¨ å‰ç«¯ç¤ºä¾‹

æ‰“å¼€ `examples/demo.html` æŸ¥çœ‹å®Œæ•´çš„å‰ç«¯ä½¿ç”¨ç¤ºä¾‹,åŒ…æ‹¬:
- æ‹–æ‹½ä¸Šä¼ 
- åŒæ­¥/å¼‚æ­¥è½¬æ¢åˆ‡æ¢
- è¿›åº¦æ¡æ˜¾ç¤º
- è§†é¢‘é¢„è§ˆ
- ä¸‹è½½åŠŸèƒ½

## âš ï¸ æ³¨æ„äº‹é¡¹

### FFmpeg ä¾èµ–
æœåŠ¡éœ€è¦ FFmpeg æ‰èƒ½å·¥ä½œ,è¯·ç¡®ä¿:
- macOS: `brew install ffmpeg`
- Windows: ä¸‹è½½å¹¶å®‰è£… https://www.gyan.dev/ffmpeg/builds/
- Linux: `sudo apt install ffmpeg`

### ç«¯å£é…ç½®
- é»˜è®¤ç«¯å£èŒƒå›´: 18888-28888
- åªç›‘å¬ 127.0.0.1(æœ¬åœ°)
- é…ç½®æ–‡ä»¶: `~/.ffmpeg-binary/config.json`

### æ•°æ®ç›®å½•
- é…ç½®ç›®å½•: `~/.ffmpeg-binary/`
- ä¸´æ—¶æ–‡ä»¶: `~/.ffmpeg-binary/data/`
- æ—¥å¿—æ–‡ä»¶: `~/Library/Logs/ffmpeg-binary.log` (macOS)

## ğŸ”§ é«˜çº§é…ç½®

ç¼–è¾‘ `~/.ffmpeg-binary/config.json`:

```json
{
  "port": 18888,
  "host": "127.0.0.1",
  "data_dir": "/custom/path/data",
  "ffmpeg_path": "/custom/path/ffmpeg"
}
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å¤§æ–‡ä»¶**: ä½¿ç”¨å¼‚æ­¥è½¬æ¢æ¥å£
2. **åˆ†ç‰‡å¤§å°**: å»ºè®® 1MB æ¯ç‰‡
3. **å¹¶å‘é™åˆ¶**: æ ¹æ® CPU æ ¸å¿ƒæ•°è°ƒæ•´
4. **æ¸…ç†ä»»åŠ¡**: å®šæœŸåˆ é™¤å·²å®Œæˆä»»åŠ¡

## ğŸ› æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨
- æ£€æŸ¥ FFmpeg æ˜¯å¦å®‰è£…: `ffmpeg -version`
- æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨: `lsof -i :18888`
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶

### è½¬æ¢å¤±è´¥
- æ£€æŸ¥è§†é¢‘æ ¼å¼æ˜¯å¦ä¸º WebM
- æŸ¥çœ‹ FFmpeg é”™è¯¯æ—¥å¿—
- ç¡®è®¤ç£ç›˜ç©ºé—´å……è¶³

### è‡ªå¯åŠ¨æœªç”Ÿæ•ˆ
- macOS: æ£€æŸ¥ `~/Library/LaunchAgents/com.ffmpeg.binary.plist`
- Windows: æ£€æŸ¥å¯åŠ¨æ–‡ä»¶å¤¹
- Linux: æ£€æŸ¥ systemd æœåŠ¡çŠ¶æ€

## ğŸ“ å¾…ä¼˜åŒ–é¡¹

- [ ] æ·»åŠ è§†é¢‘è´¨é‡é…ç½®é€‰é¡¹
- [ ] æ”¯æŒæ›´å¤šè§†é¢‘æ ¼å¼è½¬æ¢
- [ ] æ·»åŠ è½¬æ¢é¢„è®¾(é«˜è´¨é‡/å¿«é€Ÿ/å‹ç¼©)
- [ ] Web ç®¡ç†ç•Œé¢
- [ ] è½¬æ¢ä»»åŠ¡æŒä¹…åŒ–å­˜å‚¨
- [ ] å¤šä»»åŠ¡å¹¶å‘å¤„ç†ä¼˜åŒ–
- [ ] FFmpeg è¿›åº¦è§£æä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

MIT License

---

**å¼€å‘å®Œæˆæ—¶é—´**: 2025-01-15
**Go ç‰ˆæœ¬**: 1.23+
**ä¾èµ–**: Gin, UUID, FFmpeg